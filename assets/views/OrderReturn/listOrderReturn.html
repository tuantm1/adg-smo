<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption font-dark">
            <span class="caption-subject bold uppercase"> Danh sách yêu cầu trả lại hàng</span>
        </div>

    </div>
    <div class="portlet-body">
        <div class="table-toolbar">
            <div class="row">
                <div class="col-md-6">
                    <div class="btn-group">
                        <button id="sample_editable_1_new" class="btn sbold green" ui-sref="OrderReturn.listReturn"> Tạo yêu cầu trả lại hàng
                        </button>
                    </div>
                </div>
                <div class="col-md-3" id="reportrange" style="background: #fff; cursor: pointer; padding: 10px 20px; border: 1px solid #ccc; float: right; margin-right: 15px">
                    <i class="fa fa-calendar"></i>&nbsp;
                    <span></span> <i class="fa fa-caret-down"></i>
                </div>
            </div>
        </div>
        <div id="sample_1_wrapper" class="dataTables_wrapper no-footer">
            <div>
                <table class="table table-striped table-bordered table-hover order-column dataTable no-footer"
                       id="sample_1" role="grid" aria-describedby="sample_1_info">
                    <thead>
                    <tr role="row">
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 100px; text-align: center; vertical-align: middle;">
                            Số đơn hàng
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 100px; text-align: center; vertical-align: middle;"
                            aria-label=" Status : activate to sort column ascending"> Ngày trả hàng
                        </th>
                        <th  tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style=" text-align: center; vertical-align: middle;"
                            aria-label=" Status : activate to sort column ascending"> Sản phẩm
                        </th>

                        <th  tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 100px; text-align: center; vertical-align: middle;"
                            aria-label=" Joined : activate to sort column ascending"> Đại lý
                        </th>
                        <th  tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 100px;  text-align: center; vertical-align: middle;"
                            aria-label=" Joined : activate to sort column ascending"> Người<br/>phê duyệt
                        </th>
                        <th  tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            aria-label=" Joined : activate to sort column ascending" 
                            style="width: 100px;  text-align: center; vertical-align: middle;"> Ghi chú
                        </th>
                        <th  tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            aria-label=" Joined : activate to sort column ascending" style="width: 100px;  text-align: center; vertical-align: middle;"> Trạng thái
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            aria-label=" Actions : activate to sort column ascending" style="width: 100px; text-align: center; vertical-align: middle;"> Thao tác
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            aria-label=" Actions : activate to sort column ascending" style="width: 100px; text-align: center; vertical-align: middle;"> Thông báo
                        </th>
                    </tr>
                    <tr role="row" class="filter">
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="KUNNR"
                                   ng-model="search.ID_ORDER"></td>
                        <!--                        <td rowspan="1" colspan="1"></td>-->
                        <!--                        <td rowspan="1" colspan="1">-->
                        <!--                            <input type="text" class="form-control form-filter input-sm" name="order_id"-->
                        <!--                                   ng-model="search.NAME_SHIPTO"></td>-->
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.Z_DATE"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.itemText"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.CREATE_BY_NAME"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.NAME_APPROVE"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.NOTE"></td>

                        <td rowspan="1" colspan="1">
                        </td>
                        <td rowspan="1" colspan="1">
                        </td>
                        <td rowspan="1" colspan="1">
                        </td>

                    </tr>
                    </thead>
                    <tbody>

                    <tr class="gradeX odd" role="row"
                        dir-paginate="list in listOrderReturn | filter:search:strict |itemsPerPage:10">
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.ID_ORDER}}</td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.Z_DATE}}</td>

                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})"
                            data-ng-model="list.itemText">
                            <div data-ng-repeat="item in list.ITEMS track by $index">
                                <div data-ng-if="item.Z_RETURN==='2'">{{item.NAME}}: {{item.QUANTITY}}
                                    {{item.SALE_UNIT}}
                                </div>
                            </div>
                            <div data-ng-repeat="item in list.ITEMS track by $index">
                                <div data-ng-if="item.Z_RETURN==='1'">{{item.NAME}}: {{item.QUANTITY}}
                                    {{item.SALE_UNIT}}
                                </div>
                            </div>
                        </td>

                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.CREATE_BY_NAME}}
                        </td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.NAME_APPROVE}}
                        </td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.NOTE}}
                        </td>

                        <td class="sorting_1">
                            <div data-ng-if="list.STATUS === 'P'"><span
                                    class="label label-sm label-warning"> Đang xử lý </span></div>
                            <div data-ng-if="list.STATUS === 'R'"><span
                                    class="label label-sm label-danger"> Đã hủy </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'F'"><span class="label label-sm label-danger"
                                                                        data-ng-click="reasonReject(list.ID_ORDER)"> Không thành công </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'S'"><span
                                    class="label label-sm label-success">Đặt thành công </span></div>
                            <div data-ng-if="list.STATUS === 'A'"><span
                                    class="label label-sm label-success">Đã duyệt </span></div>
                        </td>

                        <td class="sorting_1">
                            <div data-ng-if=" (list.ID_APPROVE === userData.id_user || list.ID_APPROVE === userData.id_peer ) && (list.STATUS === 'P' || list.STATUS === 'F')">
                                <div class="form-group">
                                    <a data-ng-click="approve(list.ID_ORDER)" class="btn btn-xs btn-success" type="button"
                                    title="Phê duyệt">Phê duyệt</a>
                                </div>
                                <a data-ng-click="rejectReason(list.ID_ORDER)"
                                   class="btn btn-xs btn-danger" type="button"
                                   title="Từ chối" data-toggle="modal" data-target="#myModal2" style="float: left">Từ
                                    chối</a>

                            </div>
                        </td>
                        <td class="sorting_1">
                            <a title="Comment">
                                <i class="fa fa-comments-o"  style="font-size:36px"></i>
                                <span class="badge badge-danger">{{list.check ? list.check : 0}} </span>
                            </a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row">
                <div class="col-md-5 col-sm-5">
                </div>
                <dir-pagination-controls
                        max-size="10"
                        direction-links="true"
                        boundary-links="true">
                </dir-pagination-controls>
            </div>
        </div>
    </div>
</div>
<div id="myModal2" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- dialog body -->
            <div class="modal-body">
                <h4><span class="caption-subject bold uppercase">Lý do từ chối đơn hàng</span></h4>
                <div data-ng-repeat="reason in listRejectReason track by $index">
                    <a data-ng-click="reject(reason.text)" role="button" class="btn btn-secondary popover-test"
                       title="Popover title"
                       data-ng-dismiss="modal">{{reason.text}} </a></p>
                </div>
                <input type="text" class="form-control form-filter input-sm" name="KUNNR"
                       ng-model="reason" placeholder="Lý do khác ...."></td>
            </div>

            <!-- dialog buttons -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-ng-dismiss="modal" data-ng-click="reject(reason)">
                    OK
                </button>
            </div>
        </div>
    </div>
</div>