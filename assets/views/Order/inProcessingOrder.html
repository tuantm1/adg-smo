<div class="portlet light bordered">
    <div class="portlet-title">
        <div class="caption font-dark">
            <span class="caption-subject bold uppercase"> Danh sách đơn đặt hàng</span>
        </div>
        <div class="col-md-2" id="reportrange"
             style="background: #fff; cursor: pointer; padding: 10px 30px; border: 1px solid #ccc; float: right;">
            <i class="fa fa-calendar"></i>&nbsp;
            <span></span> <i class="fa fa-caret-down"></i>
        </div>
    </div>
    <div class="portlet-body">
        <div class="table-toolbar">
            <div class="row">
                <div class="col-md-6">
                </div>

            </div>
        </div>
        <div id="sample_1_wrapper" class="dataTables_wrapper no-footer">
            <div class="table-scrollable">
                <table class="table table-striped table-bordered table-hover order-column dataTable no-footer"
                       id="sample_1" role="grid" aria-describedby="sample_1_info">
                    <thead>
                    <tr role="row">
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 100px;">
                            Số đơn<br/>đặt hàng
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 100px;"
                            aria-label=" Joined : activate to sort column ascending"> Ngày<br/>đặt hàng
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 100px;"
                            aria-label=" Status : activate to sort column ascending"> Ngày<br/>giao hàng<br/>dự kiến
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 100px;"
                            aria-label=" Joined : activate to sort column ascending"> Ngày<br/>giao hàng<br/>thực tế
                        </th>
                        <th class="sorting" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle;"
                            aria-label=" Status : activate to sort column ascending"> Đại lý
                        </th>
                        <th class="sorting" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle;"
                            aria-label=" Status : activate to sort column ascending"> Số SO
                        </th>
                        <th class="sorting" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; "
                            aria-label=" Status : activate to sort column ascending"> Sản phẩm
                        </th>

                        <!-- <th class="sorting" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            aria-label=" Joined : activate to sort column ascending"> Người tạo
                        </th> -->

                        <!--                        <th class="sorting" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"-->
                        <!--                            aria-label=" Joined : activate to sort column ascending" style="width: 120px;"> Ghi chú-->
                        <!--                        </th>-->
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 70px;"
                            aria-label=" Joined : activate to sort column ascending" style="width: 120px;"> Trạng thái
                        </th>
                        <th tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1"
                            style="text-align: center; vertical-align: middle; width: 70px;"
                            aria-label=" Actions : activate to sort column ascending" style="width: 150px;"> Thao tác
                        </th>
                    </tr>
                    <tr role="row" class="filter">
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="KUNNR"
                                   ng-model="search.ID_ORDER"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.TODAY"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.Z_DATE"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.ZNGAYGH"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.NAME_SHIPTO"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.SO_NUMBER"></td>
                        <td rowspan="1" colspan="1">
                            <input type="text" class="form-control form-filter input-sm" name="order_id"
                                   ng-model="search.itemText"></td>
                        <td rowspan="1" colspan="1">
                            <select class="form-control js-example-basic-single" name="options2"
                                    tabindex="-1" aria-hidden="true" aria-required="true"
                                    aria-invalid="false"
                                    aria-describedby="options2-error"
                                    data-ng-model="search.STATUS"
                                    data-ng-options="stt.value as stt.name for stt in status">
                            </select>
                        </td>
                        <td rowspan="1" colspan="1"></td>
                    </tr>
                    </thead>
                    <tbody>
                    <tr class="gradeX odd" role="row"
                        dir-paginate="list in listOrder | filter:search:strict |itemsPerPage:10">
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.ID_ORDER}}</td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.TODAY}}
                        </td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.Z_DATE}}</td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.ZNGAYGH}}
                        </td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.NAME_SHIPTO}}</td>
                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})">{{list.SO_NUMBER}}</td>

                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})"
                            data-ng-model="list.itemText">
                            <div data-ng-repeat="item in list.ITEMS track by $index">
                                <div>{{item.NAME}}: {{item.QUANTITY}}
                                    {{item.SALE_UNIT}}
                                </div>
                            </div>
                        </td>
                        <!--                        <td class="sorting_1" ui-sref="Order.detail({idOrder: list.ID_ORDER})"-->
                        <!--                            data-ng-model="list.itemText">-->
                        <!--                            <div data-ng-repeat="item in list.ITEMS track by $index">-->
                        <!--                                <div>{{item.NAME}}: {{item.QUANTITY}}-->
                        <!--                                    {{item.SALE_UNIT}}-->
                        <!--                                </div>-->
                        <!--                            </div>-->
                        <!--                        </td>-->

                        <td class="sorting_1">
                            <!--                            <div data-ng-if="(list.STATUS === 'P'||list.STATUS==='L') &&  list.ZTC==='0'" ><span-->
                            <div data-ng-if="(list.STATUS === 'P'||list.STATUS==='L') &&  list.ZTC!=='2'"><span
                                    class="label label-sm label-info"> Đã lưu </span></div>
                            <div data-ng-if="list.STATUS === 'P' && list.ZTC==='2'"><span
                                    class="label label-sm label-info"> Đã phê duyệt TC </span></div>
                            <div data-ng-if="list.STATUS === 'R'||list.STATUS === 'X'"><span
                                    class="label label-sm label-danger"> Đã hủy </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'F'"><span class="label label-sm label-danger"> Không thành công </span>
                            </div>

                            <div data-ng-if="list.STATUS === 'C'"><span class="label label-sm label-warning"> Vượt hạn mức tín dụng </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'T'"><span
                                    class="label label-sm label-warning"> Chờ xử lý </span>
                            </div>
                            <div data-ng-if="(list.STATUS === 'B'&&list.STATUS_BL === '')"><span
                                    class="label label-sm label-warning"> Chờ bảo lãnh </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'B'&&list.STATUS_BL === 'X'">
                                <!--                                <span class="label label-sm label-warning"> Đang bảo lãnh </span>-->
                                <span class="label label-sm label-warning"> Chờ bảo lãnh </span>
                            </div>
                            <div data-ng-if="list.STATUS === 'S'"><span
                                    class="label label-sm label-success">Đặt thành công </span></div>
                            <div data-ng-if="list.STATUS === 'A'"><span
                                    class="label label-sm label-success">Đã duyệt </span></div>
                            <div data-ng-if="list.STATUS === 'D'"><span
                                    class="label label-sm label-danger">Bị từ chối </span></div>
                        </td>

                        <td class="sorting_1">
                            <div class="btn-group"
                                 data-ng-if=" (list.ID_APPROVE === userData.id_user || list.ID_APPROVE === userData.id_peer ) && (list.STATUS === 'F' || list.STATUS === 'L')">
                                <button data-ng-click="approve(list.ID_ORDER)"
                                        class="btn btn-xs btn-success" type="button"
                                        title="Gửi">Gửi
                                </button>
                                <button data-ng-click="rejectReason(list.ID_ORDER)"
                                        class="btn btn-xs btn-danger" type="button"
                                        title="Hủy" data-toggle="modal" data-target="#myModal2" style="float: left">Hủy
                                </button>
                            </div>
                            <div class="btn-group"
                                 data-ng-if=" (list.ID_APPROVE === userData.id_user || list.ID_APPROVE === userData.id_peer ) && (list.STATUS === 'P')">
                                <button data-ng-click="approve(list.ID_ORDER)"
                                        class="btn btn-xs btn-success" type="button"
                                        title="Gửi">Gửi
                                </button>
                                <button data-ng-click="deleteOrder(list.ID_ORDER)"
                                        class="btn btn-xs btn-danger" type="button"
                                        title="Xóa" style="float: left">Xóa
                                </button>
                            </div>
                            <div class="btn-group"
                                 data-ng-if=" (list.ID_APPROVE === userData.id_user || list.ID_APPROVE === userData.id_peer ) && (list.STATUS === 'C')">
                                <button data-ng-click="approve(list.ID_ORDER)"
                                        class="btn btn-xs btn-success" type="button"
                                        title="Yêu cầu phê duyệt">Yêu cầu phê duyệt
                                </button>

                                <button data-ng-click="rejectReason(list.ID_ORDER)"
                                        class="btn btn-xs btn-danger" type="button"
                                        title="Hủy" data-toggle="modal" data-target="#myModal2" style="float: left">Hủy
                                </button>

                            </div>


                        </td>
                        <!--                        <td class="sorting_1">-->
                        <!--                            <a title="Comment">-->
                        <!--                                <i class="fa fa-comments-o" style="font-size:36px"></i>-->
                        <!--                                <span class="badge badge-danger">{{list.check ? list.check : 0}} </span>-->
                        <!--                            </a>-->
                        <!--                        </td>-->
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="row">
                <div class="col-md-5 col-sm-5">
                </div>
                <dir-pagination-controls
                        max-size="10"
                        direction-links="true"
                        boundary-links="true">
                </dir-pagination-controls>
            </div>
        </div>
    </div>
</div>
<div id="myModal2" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- dialog body -->
            <div class="modal-body">
                <h4><span class="caption-subject bold uppercase">Lý do từ chối đơn hàng</span></h4>
                <div data-ng-repeat="reason in listRejectReason track by $index">
                    <a data-ng-click="reject(reason.text)" role="button" class="btn btn-secondary popover-test"
                       title="Popover title"
                       data-ng-dismiss="modal">{{reason.text}} </a></p>
                </div>
                <input type="text" class="form-control form-filter input-sm" name="KUNNR"
                       ng-model="reason" placeholder="Lý do khác ...."></td>
            </div>

            <!-- dialog buttons -->
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-ng-dismiss="modal" data-ng-click="reject(reason)">
                    OK
                </button>
            </div>
        </div>
    </div>
</div>